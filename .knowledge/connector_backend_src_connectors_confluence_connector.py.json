{"is_source_file": true, "format": "Python", "description": "Source code for a Confluence connector implementing OAuth2 authentication, resource management, search, and credential validation for Atlassian's Confluence API, used within a larger project to interface with Confluence data.", "external_files": ["src.connectors.base", "src.models.schemas", "src.core.exceptions", "src.core.config"], "external_methods": ["settings.CONFLUENCE_CLIENT_ID", "settings.CONFLUENCE_CLIENT_SECRET", "BaseConnector.__init__", "urlencode"], "published": ["ConfluenceConnector"], "classes": [{"name": "ConfluenceConnector", "description": "A connector class for Atlassian Confluence integration, supporting OAuth2, resource retrieval, search, validation, and creation functions."}], "methods": [{"name": "str get_oauth_authorize_url( self, tenant_id: str, state: str, redirect_uri: str )", "description": "Generates the OAuth authorization URL for Confluence.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Dict[str,Any] exchange_code_for_tokens( self, tenant_id: str, code: str, state: str, redirect_uri: str )", "description": "Exchanges OAuth authorization code for access and refresh tokens, also retrieves accessible resources.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Dict[str,Any] refresh_access_token( self, tenant_id: str, refresh_token: str )", "description": "Refreshes the OAuth access token using a refresh token.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "bool validate_credentials(self, credentials: Dict[str, Any])", "description": "Validates provided credentials by making a test API call.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Tuple[List[SearchResult],int] search( self, credentials: Dict[str, Any], query: str, resource_type: Optional[ResourceType] = None, filters: Optional[Dict[str, Any]] = None, page: int = 1, per_page: int = 20 )", "description": "Performs a search in Confluence pages or spaces based on resource type.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Optional[Dict[str,Any]] get_resource( self, credentials: Dict[str, Any], resource_type: ResourceType, resource_id: str )", "description": "Retrieves a specific resource, either a page or space, by ID.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Dict[str,Any] create_resource( self, credentials: Dict[str, Any], resource_type: ResourceType, data: Dict[str, Any] )", "description": "Creates a new resource (currently supports only pages) in Confluence.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "List[Dict[str,Any]] _get_accessible_resources(self, access_token: str)", "description": "Fetches Atlassian resources accessible with the current token.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Dict[str,str] _get_auth_headers(self, credentials: Dict[str, Any])", "description": "Prepares authentication headers based on credentials.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "str _get_cloud_id(self, credentials: Dict[str, Any])", "description": "Extracts the Atlassian cloud ID from credentials.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Tuple[List[SearchResult],int] _search_pages( self, credentials: Dict[str, Any], query: str, filters: Optional[Dict[str, Any]], page: int, per_page: int )", "description": "Searches Confluence pages matching a query.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "Tuple[List[SearchResult],int] _search_spaces( self, credentials: Dict[str, Any], query: str, filters: Optional[Dict[str, Any]], page: int, per_page: int )", "description": "Searches Confluence spaces matching a query.", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"name": "__init__(self, config: ConnectorConfig)", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}], "calls": ["httpx.AsyncClient.post", "httpx.AsyncClient.get", "response.raise_for_status", "response.json()"], "search-terms": ["Confluence OAuth", "access tokens", "search pages", "search spaces", "create page", "get resource", "validate credentials", "OAuth URL", "refresh token"], "state": 2, "file_id": 15, "knowledge_revision": 33, "git_revision": "", "ctags": [{"_type": "tag", "name": "ConfluenceConnector", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^class ConfluenceConnector(BaseConnector):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    def __init__(self, config: ConnectorConfig):$/", "language": "Python", "kind": "member", "signature": "(self, config: ConnectorConfig)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "_get_accessible_resources", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def _get_accessible_resources(self, access_token: str) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "member", "signature": "(self, access_token: str)", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "_get_auth_headers", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def _get_auth_headers(self, credentials: Dict[str, Any]) -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "member", "signature": "(self, credentials: Dict[str, Any])", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "_get_cloud_id", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def _get_cloud_id(self, credentials: Dict[str, Any]) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, credentials: Dict[str, Any])", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "_search_pages", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def _search_pages($/", "language": "Python", "typeref": "typename:Tuple[List[SearchResult],int]", "kind": "member", "signature": "( self, credentials: Dict[str, Any], query: str, filters: Optional[Dict[str, Any]], page: int, per_page: int )", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "_search_spaces", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def _search_spaces($/", "language": "Python", "typeref": "typename:Tuple[List[SearchResult],int]", "kind": "member", "signature": "( self, credentials: Dict[str, Any], query: str, filters: Optional[Dict[str, Any]], page: int, per_page: int )", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "connector_type", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    connector_type = \"atlassian\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "create_resource", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def create_resource($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "( self, credentials: Dict[str, Any], resource_type: ResourceType, data: Dict[str, Any] )", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    display_name = \"Confluence\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "exchange_code_for_tokens", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def exchange_code_for_tokens($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "( self, tenant_id: str, code: str, state: str, redirect_uri: str )", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "get_oauth_authorize_url", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def get_oauth_authorize_url($/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "( self, tenant_id: str, state: str, redirect_uri: str )", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "get_resource", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def get_resource($/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "( self, credentials: Dict[str, Any], resource_type: ResourceType, resource_id: str )", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    id = \"confluence\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "refresh_access_token", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def refresh_access_token($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "( self, tenant_id: str, refresh_token: str )", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "required_scopes", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    required_scopes = [\"read:confluence-content.all\", \"write:confluence-content\", \"read:confluen/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def search($/", "language": "Python", "typeref": "typename:Tuple[List[SearchResult],int]", "kind": "member", "signature": "( self, credentials: Dict[str, Any], query: str, resource_type: Optional[ResourceType] = None, filters: Optional[Dict[str, Any]] = None, page: int = 1, per_page: int = 20 )", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "supported_auth_types", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    supported_auth_types = [AuthType.OAUTH2, AuthType.API_KEY]$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "supported_resources", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    supported_resources = [ResourceType.PAGE, ResourceType.SPACE]$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "supports_oauth", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    supports_oauth = True$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "supports_webhooks", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    supports_webhooks = True$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "validate_credentials", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    async def validate_credentials(self, credentials: Dict[str, Any]) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(self, credentials: Dict[str, Any])", "scope": "ConfluenceConnector", "scopeKind": "class"}, {"_type": "tag", "name": "version", "path": "/home/kavia/workspace/code-generation/unified-workflow-connector-145367-145377/connector_backend/src/connectors/confluence/connector.py", "pattern": "/^    version = \"1.0.0\"$/", "language": "Python", "kind": "variable", "scope": "ConfluenceConnector", "scopeKind": "class"}], "hash": "7d244716c15fdccbe54132c8c2e321c0", "format-version": 4, "code-base-name": "connector_backend", "filename": "connector_backend/src/connectors/confluence/connector.py", "fields": [{"name": "connector_type = \"atlassian\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "display_name = \"Confluence\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "id = \"confluence\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "required_scopes = [\"read:confluence-content.all\", \"write:confluence-content\", \"read:confluen/", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "supported_auth_types = [AuthType.OAUTH2, AuthType.API_KEY]", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "supported_resources = [ResourceType.PAGE, ResourceType.SPACE]", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "supports_oauth = True", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "supports_webhooks = True", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}, {"name": "version = \"1.0.0\"", "scope": "ConfluenceConnector", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"33": ""}]}